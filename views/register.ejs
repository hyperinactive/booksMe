<%- include('partials/header') %> <%- include('partials/navbar') %>

<!--DON'T FORGET-->
<!--TODO: Make already-logged, register, login use the same template-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<% if (callType === "register") { %>
<script type="text/javascript" src="scripts/validate-register.js"></script>
<% } else if (callType === "login") { %>
<script type="text/javascript" src="scripts/validate-login.js"></script>
<% } %>
<div class="container mt-5">
  <% if (callType === "register") { %>
  <h1>Register</h1>
  <% } else if (callType === "login") { %>
  <h1>Login</h1>
  <% } else if (isAuthenticated) { %>
  <h1>Already logged!</h1>
  <% } %>

  <!-- todo: handle already authenticated users who try to authenticate again-->
  <!-- todo: please do this, the templates are a mess-->

  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-body">
          <% if (callType === "register") { %>
          <form action="/register" method="POST">
          <% } else { %>
          <form action="/login" method="POST">
            <% } %>
            <div class="row">
              <div class="col-3">
                <% if (callType === "login") { %>
                  <a><img class="img" src="images/logged.jpg" /></a>
                <% } else if (callType === "register") { %>
                <a><img class="img" src="images/register.jpg" /></a>
                <% } else if (callType === "alreadyLogged") { %>
                <a><img class="img" src="images/already-logged.jpg" /></a>
                <% } %>
              </div>
              <div class="col-sm-7">
                <div class="form-group">
                  <label for="username">Username</label>
                  <input
                    type="text"
                    class="form-control"
                    name="username"
                    autofocus
                  />
                </div>

                <div class="form-group">
                  <label for="password">Password</label>
                  <input
                    type="password"
                    class="password form-control"
                    name="password"
                  />
                </div>

                <% if (callType === "register") { %>
                <div class="form-group">
                  <label for="password-check">Retype password</label>
                  <input
                    type="password"
                    class="form-control password-check"
                    name="password-check"
                  />
                </div>

                <button type="submit" class="login-btn btn btn-dark" disabled>
                  Register
                </button>
                <% } else if (callType === "login") { %>
                <button type="submit" class="login-btn btn btn-dark" disabled>
                  Login
                </button>
                <% } %>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
